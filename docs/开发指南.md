# 开发指南

## 环境搭建

### 前置要求
- Node.js >= 18.0.0
- PostgreSQL >= 15.0
- Redis >= 7.0

### 安装步骤

1. 克隆项目
```bash
git clone <repository-url>
cd zap
```

2. 安装依赖
```bash
# 安装前端依赖
cd frontend && npm install

# 安装后端依赖
cd backend && npm install
```

3. 启动服务
```bash
# 启动数据库
docker-compose up -d postgres redis

# 启动后端
cd backend && npm run start:dev

# 启动前端
cd frontend && npm run dev
```

## 项目结构

### 前端结构
```
frontend/
├── src/
│   ├── components/     # 公共组件
│   ├── pages/         # 页面组件
│   ├── store/         # 状态管理
│   ├── utils/         # 工具函数
│   ├── types/         # 类型定义
│   └── hooks/         # 自定义hooks
└── public/            # 静态资源
```

### 后端结构
```
backend/
├── src/
│   ├── common/        # 公共模块
│   ├── modules/       # 业务模块
│   ├── config/        # 配置文件
│   └── main.ts        # 入口文件
├── prisma/            # 数据库配置
└── dist/              # 构建输出
```

## 开发规范

### 代码风格
- 使用TypeScript严格模式
- 遵循ESLint和Prettier配置
- 组件使用函数式组件
- 使用React Hooks

### Git工作流
1. 从main分支创建feature分支
2. 开发完成后提交代码
3. 创建Pull Request
4. 代码审查通过后合并到main分支

### 提交规范
```
feat: 新功能
fix: 修复bug
docs: 文档更新
style: 代码格式化
refactor: 重构
test: 测试相关
chore: 构建或工具变动
```

## 测试

### 前端测试
```bash
cd frontend
npm run test
npm run test:coverage
```

### 后端测试
```bash
cd backend
npm run test
npm run test:e2e
```

## 部署

### Docker部署
```bash
docker-compose up -d
```

### 生产环境部署
1. 构建前端
```bash
cd frontend && npm run build
```

2. 构建后端
```bash
cd backend && npm run build
```

3. 使用Docker Compose部署
```bash
docker-compose -f docker-compose.prod.yml up -d
```